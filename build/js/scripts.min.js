!function(o){let e="";o(window).on("popstate",function(){window.location.replace(e)}),o("#new-quote-btn").on("click",function(t){t.preventDefault(),e=document.URL,o.ajax({method:"GET",url:qod_vars.rest_url+"wp/v2/posts?filter[orderby]=rand&filter[posts_per_page]=1"}).done(function(e){quoteSource=e[0].qod_quote_source;const t=qod_vars.home_url+"/"+e[0].slug+"/";history.pushState(null,null,t),console.log(t),console.log(e[0]),o("#qod-quotes").html(e[0].content.rendered);let u="<span>- "+e[0].title.rendered+"</span>",n="<span>, "+e[0]._qod_quote_source+"</span>",s=`<a target='_blank' class='author-source' href=${e[0]._qod_quote_source_url} > ${e[0]._qod_quote_source}</a>`;e[0]._qod_quote_source_url&&e[0]._qod_quote_source?o("#author").html(u+s):!e[0]._qod_quote_source_url&&e[0]._qod_quote_source?o("#author").html(u+n):o("#author").html(u)})}),o("#quote-submission-form").on("submit",function(e){e.preventDefault();var t=o("#quote-author").val(),u=o("#quote-content").val(),n=o("#quote-location").val(),s=o("#quote-source").val();console.log(t),o.ajax({method:"POST",url:qod_vars.rest_url+"wp/v2/posts/",data:{title:t,content:u,_qod_quote_source:n,_qod_quote_source_url:s},beforeSend:function(o){o.setRequestHeader("X-WP-Nonce",qod_vars.wpapi_nonce)}}).done(function(){o(".submit-message").show()}).always(function(){o("#quote-submission-form").slideUp()}).fail(function(){alert("Your submission could not be processed. Please try again.")})})}(jQuery);